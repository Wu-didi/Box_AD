#!/bin/bash
# 快速使用指南

cat << 'EOF'
╔══════════════════════════════════════════════════════════════╗
║        ROS2 Hybrid A* 快速测试指南                          ║
╔══════════════════════════════════════════════════════════════╗

✅ 修复完成！现在可以正常使用了

🚀 快速开始（推荐）：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

方式1：分步测试（推荐 - 看得到详细过程）
────────────────────────────────────────

  终端1：启动节点
  $ cd /home/nvidia/vcii/wudi/Box_AD/ROS2_Hybrid_A_Star
  $ ./run_test.sh

  终端2：发布地图
  $ ros2 run Box_AD png_map_publisher --ros-args \
      -p image_path:=/home/nvidia/vcii/wudi/Box_AD/maps/map_2d.png \
      -p resolution:=0.1

  终端3：发布起点终点（等地图加载后）
  $ cd /home/nvidia/vcii/wudi/Box_AD/ROS2_Hybrid_A_Star
  $ ./publish_test_poses.sh

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

方式2：一键测试（最简单 - 全自动）
────────────────────────────────────────

  $ cd /home/nvidia/vcii/wudi/Box_AD/ROS2_Hybrid_A_Star
  $ ./test_full.sh

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📝 参数配置：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  所有参数在: config/params.yaml
  修改后无需重新编译，直接重启节点即可

  当前参数：
  - 车长: 4.53m, 车宽: 1.9m, 轴距: 2.85m
  - 最大转向角: 60度
  - 步长: 1.6m
  - 状态分辨率: 1.0m

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 查看结果：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  查看路径：
  $ ros2 topic echo /global_path --once

  查看统计：
  $ ros2 topic echo /global_path --once | grep -c "position:"

  RViz2可视化：
  $ rviz2
  # 然后添加：
  #   - Fixed Frame: map
  #   - Add -> /map -> Map
  #   - Add -> /global_path -> Path
  #   - Add -> /search_tree -> MarkerArray

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔧 故障排查：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  检查节点状态：
  $ ros2 node list | grep hybrid

  检查话题：
  $ ./test_topics.sh

  查看日志：
  $ cat /tmp/hybrid_astar_node.log

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 提示：
  - 第一次运行会自动编译，需要等待约30秒
  - 地图必须先加载，节点才能开始规划
  - 测试起点终点设置在安全位置 (10,10) -> (50,50)
  - 所有脚本已添加可执行权限

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

开始测试吧！ 🚀

EOF
